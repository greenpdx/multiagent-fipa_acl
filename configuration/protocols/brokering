<scxml version="1.0" initial="1">
    
	<state id="1">
	        <transition performative="proxy" from="initiator" to="B" target="2"/>
	</state>
	<state id="2">
		<transition performative="refuse" from="B" to="initiator" target="3"/>
		<transition performative="agree" from="B" to="initiator" target="4"/>
	</state>
	
	<state id="3" final="yes">
	</state>
	
	<state id="4">
                <!-- This can either be failure-no-match or failure-proxy -->
		<transition performative="failure" from="B" to="initiator" target="5"/>
		<transition performative="inform" from="B" to="initiator" target="6"/>
	</state>
	
	<state id="5" final="yes">
	</state>
	
	<state id="6">
                <!-- This is failure-brokering -->
                <transition performative="failure" from="B" to="initiator" target="7"/>
		<transition performative=".*" from="B" to="initiator" target="8"/>
		
		<!-- delete file? (any subprotocol is accepted) -->
		<subprotocol file="request" multiple="yes" from="B"> 
                    <mapping from="B" to="initiator"/>
                </subprotocol>
	</state>
	
	<state id="7" final="yes">
        </state>
        
        <state id="8" final="yes">
                <transition performative=".*" from="B" to="initiator" target="8"/>
                
                <!-- delete file? (any subprotocol is accepted) -->
                <subprotocol file="request" multiple="yes"> 
                    <mapping from="B" to="initiator"/>
                </subprotocol>
        </state>

</scxml>
